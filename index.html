<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <!-- Optimización para móviles: viewport-fit=cover para iPhones y escala correcta -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no" />
  <title>RRIMPORT | Catálogo Hilux 2021-2023</title>
  <meta name="description" content="Catálogo interactivo de carrocería e iluminación RRIMPORT para Toyota Hilux 2021-2023." />
  
  <link rel="stylesheet" href="./styles.css" />
  
  <!-- 1. Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
          colors: { brand: { black: '#000000', red: '#DC2626' } }
        }
      }
    }
  </script>

  <!-- 2. React & ReactDOM (Versión UMD - Máxima compatibilidad móvil) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- 3. Babel Standalone (Para traducir el código) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* Asegurar altura completa en móviles */
    body { min-height: 100vh; min-height: 100dvh; }
    /* Prevenir selección de texto accidental al tocar botones en móvil */
    button { -webkit-tap-highlight-color: transparent; user-select: none; }
    .text-stroke-white { -webkit-text-stroke: 1px white; }
  </style>
</head>
<body class="bg-white text-gray-900 antialiased selection:bg-red-100 selection:text-red-900">
  
  <!-- Contenedor Principal -->
  <div id="root"></div>

  <!-- Script de Emergencia: Muestra errores en el móvil si la app falla -->
  <div id="error-display" style="display:none; padding:20px; color:red; font-family:monospace; font-size:12px;"></div>
  <script>
    window.onerror = function(msg, url, line) {
      document.getElementById('error-display').style.display = 'block';
      document.getElementById('error-display').innerText = "ERROR: " + msg + "\nLine: " + line;
    };
  </script>

  <!-- LÓGICA DE LA APLICACIÓN -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    // --- ÍCONOS SVG NATIVOS (Sin dependencias externas para evitar fallos) ---
    const Icons = {
      ShoppingCart: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>,
      Menu: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>,
      X: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>,
      Phone: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
      ArrowRight: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>,
      ShieldCheck: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="m9 12 2 2 4-4"/></svg>,
      Truck: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/><path d="M15 18H9"/><path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"/><circle cx="17" cy="18" r="2"/><circle cx="7" cy="18" r="2"/></svg>,
      Trash2: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
      CheckCircle: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>,
      Zap: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
    };

    // --- Componente de Logo con Fallback ---
    const BrandLogo = () => {
      const [imgError, setImgError] = useState(false);
      return !imgError ? (
        <img 
          src="./images/logo.png" 
          alt="RRIMPORT" 
          className="h-10 md:h-12 w-auto object-contain cursor-pointer"
          onError={() => setImgError(true)} 
        />
      ) : (
        <div className="flex items-center space-x-2 cursor-pointer group select-none">
          <div className="bg-black text-white p-2 rounded-sm"><span className="font-black text-xl italic tracking-tighter">RR</span></div>
          <div className="flex flex-col leading-none"><span className="text-xl font-black tracking-tighter text-black italic">RR</span><span className="text-[10px] font-bold tracking-[0.25em] text-black">IMPORT</span></div>
        </div>
      );
    };

    // --- Placeholder visual cuando no hay imagen ---
    const ProductIconPlaceholder = ({ type }) => (
      <div className="w-full h-full flex items-center justify-center bg-gray-50">
        <div className="w-24 h-24 rounded-full bg-white flex items-center justify-center border-4 border-gray-100 shadow-inner">
          {type.includes('led') ? <div className="w-16 h-16 bg-gray-900 rounded-full flex items-center justify-center text-white"><Icons.Zap /></div> :
           type.includes('hal') ? <div className="w-16 h-16 bg-gray-200 rounded-full" /> :
           <div className="w-16 h-16 bg-gradient-to-tr from-gray-300 to-white rounded-full" />}
        </div>
      </div>
    );

    // --- Componente Tarjeta ---
    const ProductCard = ({ item, addToCart }) => {
      const [imgError, setImgError] = useState(false);
      return (
        <div className="group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-200 overflow-hidden flex flex-col transform active:scale-95 md:active:scale-100 md:hover:-translate-y-1 touch-manipulation">
          <div className="h-48 md:h-56 relative bg-gray-50">
            {!imgError ? (
              <img src={`./images/${item.id}.jpg`} alt={item.name} className="w-full h-full object-cover mix-blend-multiply group-hover:mix-blend-normal transition-all" onError={() => setImgError(true)} loading="lazy" />
            ) : (
              <ProductIconPlaceholder type={item.id} />
            )}
            <span className="absolute top-4 right-4 bg-black text-white text-xs px-3 py-1 font-bold tracking-wider z-10 shadow-md rounded-sm">{item.tag}</span>
          </div>
          <div className="p-5 flex flex-col flex-grow relative">
            <h3 className="text-lg font-bold text-gray-900 mb-2 leading-tight">{item.name}</h3>
            <p className="text-sm text-gray-500 mb-4 line-clamp-2">{item.desc}</p>
            <div className="mt-auto">
              <div className="flex items-center justify-between pt-4 border-t border-gray-100">
                <div className="flex flex-col"><span className="text-xs text-gray-400 font-medium">Precio Unitario</span><span className="text-xl font-black text-gray-900">S/ {item.price.toLocaleString()}</span></div>
                <button onClick={() => addToCart(item)} className="bg-black text-white p-3 rounded-lg shadow-lg active:bg-gray-800 transition-colors" aria-label="Añadir"><Icons.ShoppingCart /></button>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // --- APP PRINCIPAL ---
    const CatalogApp = () => {
      const [activePage, setActivePage] = useState('home');
      const [cart, setCart] = useState([]);
      const [isMenuOpen, setIsMenuOpen] = useState(false);
      const [notification, setNotification] = useState(null);

      useEffect(() => { window.scrollTo({ top: 0, behavior: 'smooth' }); }, [activePage]);

      const addToCart = (item) => {
        setCart(prev => [...prev, { ...item, cartId: Date.now() + Math.random() }]);
        setNotification(`Agregado: ${item.name}`);
        setTimeout(() => setNotification(null), 3000);
      };

      const removeFromCart = (id) => setCart(prev => prev.filter(i => i.cartId !== id));
      const total = cart.reduce((acc, item) => acc + item.price, 0);

      const sendWhatsapp = () => {
        const msg = `Hola RRIMPORT, cotización:%0A%0A` + cart.map(i => `- ${i.name}: S/ ${i.price}`).join('%0A') + `%0A%0A*Total: S/ ${total}*`;
        window.open(`https://wa.me/51999999999?text=${msg}`, '_blank');
      };

      const products = {
        frontLight: [
          { id: 'f-led', name: 'Faros Delanteros Full LED', price: 2015, desc: 'Proyección dual con DRL. Black Edition.', specs: [], tag: 'Premium' },
          { id: 'f-hal', name: 'Faros Delanteros Halógenos', price: 1105, desc: 'Reemplazo original OEM. Policarbonato.', specs: [], tag: 'Standard' },
          { id: 'neb', name: 'Juego de Neblineros LED', price: 351, desc: 'Kit completo con ramal y switch.', specs: [], tag: 'Kit' }
        ],
        rearLight: [
          { id: 'r-led', name: 'Faros Posteriores LED (Par)', price: 780, desc: 'Diseño ahumado/rojo. Secuencial.', specs: [], tag: 'Best Seller' },
          { id: 'r-norm', name: 'Faros Posteriores Standard', price: 494, desc: 'Diseño clásico OEM. Ideal minas.', specs: [], tag: 'Básico' }
        ],
        frontBody: [
          { id: 'mask', name: 'Máscara Cromada', price: 364, desc: 'Parrilla frontal cromada tricapa.', specs: [], tag: 'Estético' },
          { id: 'bump-f', name: 'Parachoque Delantero', price: 325, desc: 'ABS listo para pintar.', specs: [], tag: 'Carrocería' },
          { id: 'rej-par', name: 'Rejilla de Parachoque (Par)', price: 117, desc: 'Insertos inferiores ventilación.', specs: [], tag: 'Repuesto' }
        ],
        rearBody: [
          { id: 'bump-r', name: 'Parachoque Posterior', price: 715, desc: 'Metálico cromado con pisaderas.', specs: [], tag: 'Heavy Duty' }
        ],
        hood: [
          { id: 'capot', name: 'Capot (Bonete)', price: 715, desc: 'Acero estampado con cataforesis.', specs: [], tag: 'Estructural' },
          { id: 'vicel', name: 'Bisel de Capot', price: 221, desc: 'Moldura decorativa frontal.', specs: [], tag: 'Accesorio' }
        ],
        mirrors: [
          { id: 'mirror', name: 'Espejos LED Cromados', price: 650, desc: 'Abatibles con luz direccional.', specs: [], tag: 'Upgrade' }
        ]
      };

      const pages = [
        { id: 'home', title: 'Inicio' },
        { id: 'frontLight', title: 'Faros Delanteros' },
        { id: 'rearLight', title: 'Faros Posteriores' },
        { id: 'frontBody', title: 'Frontal' },
        { id: 'rearBody', title: 'Posterior' },
        { id: 'hood', title: 'Capot' },
        { id: 'mirrors', title: 'Espejos' },
        { id: 'contact', title: 'Carrito' }
      ];

      return (
        <div className="min-h-screen bg-white font-sans text-gray-900 pb-24 md:pb-0 safe-area-padding">
          {/* Notificación */}
          {notification && (
            <div className="fixed top-24 right-4 z-[70] bg-black text-white px-4 py-3 rounded shadow-2xl flex items-center animate-bounce">
              <Icons.CheckCircle className="mr-2 w-5 h-5 text-green-400" />
              <span className="text-sm font-bold">{notification}</span>
            </div>
          )}

          {/* Nav */}
          <nav className="fixed top-0 w-full bg-white/95 backdrop-blur-md z-50 border-b border-gray-200 h-16 md:h-20 flex items-center justify-between px-4 md:px-8 transition-all">
            <div onClick={() => setActivePage('home')} className="flex-shrink-0"><BrandLogo /></div>
            
            {/* Desktop Menu */}
            <div className="hidden lg:flex space-x-1 overflow-x-auto">
              {pages.slice(0, 7).map(p => (
                <button key={p.id} onClick={() => setActivePage(p.id)} className={`px-3 py-1 text-xs font-bold uppercase tracking-wider border-b-2 transition-colors ${activePage === p.id ? 'border-red-600 text-black' : 'border-transparent text-gray-500 hover:text-black'}`}>{p.title}</button>
              ))}
            </div>

            <div className="flex items-center space-x-3">
              <button onClick={() => setActivePage('contact')} className={`relative p-2 ${activePage === 'contact' ? 'text-red-600' : 'text-black'}`}>
                <Icons.ShoppingCart className="w-6 h-6" />
                {cart.length > 0 && <span className="absolute -top-1 -right-1 bg-red-600 text-white text-[10px] w-5 h-5 flex items-center justify-center font-bold rounded-full">{cart.length}</span>}
              </button>
              <button className="lg:hidden p-2" onClick={() => setIsMenuOpen(!isMenuOpen)}>
                {isMenuOpen ? <Icons.X className="w-6 h-6" /> : <Icons.Menu className="w-6 h-6" />}
              </button>
            </div>
          </nav>

          {/* Mobile Menu Overlay */}
          <div className={`fixed inset-0 bg-white z-40 transform transition-transform duration-300 pt-20 px-6 ${isMenuOpen ? 'translate-x-0' : 'translate-x-full'} lg:hidden`}>
            <div className="flex flex-col space-y-4">
              {pages.map(p => (
                <button key={p.id} onClick={() => { setActivePage(p.id); setIsMenuOpen(false); }} className={`text-left text-lg font-bold uppercase py-2 border-b border-gray-100 ${activePage === p.id ? 'text-red-600' : 'text-gray-800'}`}>{p.title}</button>
              ))}
            </div>
          </div>

          <main className="pt-20 md:pt-28 px-4 max-w-7xl mx-auto w-full">
            {activePage === 'home' && (
              <div className="animate-fade-in pb-10">
                <div className="bg-black text-white relative overflow-hidden rounded-lg md:rounded-none border-b-4 border-red-600 mb-8">
                   <div className="absolute inset-0 opacity-20 bg-[radial-gradient(circle,#333_1px,transparent_1px)]" style={{backgroundSize:'20px 20px'}}></div>
                   <div className="relative z-10 p-8 md:p-16">
                      <div className="inline-block bg-white text-black px-2 py-1 text-xs font-bold uppercase mb-4 transform -skew-x-12">Catálogo 2025</div>
                      <h1 className="text-4xl md:text-7xl font-black mb-4 leading-none">RR<span className="text-stroke-white text-transparent">IMPORT</span></h1>
                      <p className="text-gray-300 mb-8 max-w-md text-sm md:text-lg border-l-2 border-red-600 pl-4">Especialistas en Toyota Hilux 2021-2023.</p>
                      <div className="flex flex-col sm:flex-row gap-3">
                        <button onClick={() => setActivePage('frontLight')} className="bg-red-600 hover:bg-red-700 text-white px-6 py-3 font-bold uppercase text-sm tracking-widest flex items-center justify-center rounded">Ver Catálogo <Icons.ArrowRight className="ml-2 w-4 h-4" /></button>
                      </div>
                   </div>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                   {[
                     { Icon: Icons.ShieldCheck, t: "Garantía", d: "Calidad asegurada" },
                     { Icon: Icons.Truck, t: "Envíos", d: "Todo el Perú" },
                     { Icon: Icons.Phone, t: "Soporte", d: "Técnicos expertos" }
                   ].map((f, i) => (
                     <div key={i} className="border border-gray-100 p-6 flex items-center space-x-4 rounded-lg bg-gray-50">
                        <div className="p-2 bg-white rounded-full shadow-sm"><f.Icon className="w-6 h-6 text-red-600" /></div>
                        <div><h4 className="font-bold uppercase text-sm">{f.t}</h4><p className="text-xs text-gray-500">{f.d}</p></div>
                     </div>
                   ))}
                </div>
              </div>
            )}

            {!['home', 'contact'].includes(activePage) && (
               <div className="animate-fade-in pb-12">
                  <div className="mb-6 flex items-baseline justify-between border-b-2 border-black pb-2">
                    <h2 className="text-2xl md:text-4xl font-black uppercase">{pages.find(p=>p.id===activePage)?.title}</h2>
                    <span className="text-[10px] md:text-xs font-bold bg-black text-white px-2 py-1 uppercase">Stock Disponible</span>
                  </div>
                  <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {products[activePage]?.map(item => <ProductCard key={item.id} item={item} addToCart={addToCart} />)}
                  </div>
               </div>
            )}

            {activePage === 'contact' && (
              <div className="max-w-3xl mx-auto animate-fade-in pb-12">
                <h2 className="text-2xl font-black uppercase mb-6">Tu Cotización</h2>
                <div className="bg-gray-50 border border-gray-200 rounded-xl overflow-hidden shadow-sm">
                   {cart.length === 0 ? (
                     <div className="p-12 text-center">
                        <Icons.ShoppingCart className="w-16 h-16 mx-auto text-gray-300 mb-4" />
                        <h3 className="font-bold text-lg mb-2">Carrito Vacío</h3>
                        <button onClick={() => setActivePage('frontLight')} className="text-red-600 font-bold underline">Volver al catálogo</button>
                     </div>
                   ) : (
                     <div>
                       <div className="max-h-[50vh] overflow-y-auto divide-y divide-gray-200">
                         {cart.map(item => (
                           <div key={item.cartId} className="p-4 flex justify-between items-center bg-white">
                             <div><h4 className="font-bold text-sm md:text-base">{item.name}</h4><span className="text-xs text-gray-400 uppercase">{item.tag}</span></div>
                             <div className="flex items-center space-x-4"><span className="font-bold">S/ {item.price}</span><button onClick={()=>removeFromCart(item.cartId)} className="text-gray-400 hover:text-red-600"><Icons.Trash2 className="w-5 h-5" /></button></div>
                           </div>
                         ))}
                       </div>
                       <div className="bg-gray-900 p-6 text-white">
                          <div className="flex justify-between items-end mb-6">
                            <span className="text-gray-400 text-xs uppercase font-bold">Total Estimado</span>
                            <span className="text-3xl font-black">S/ {total.toLocaleString()}</span>
                          </div>
                          <button onClick={sendWhatsapp} className="w-full bg-green-500 hover:bg-green-600 text-white py-4 font-bold uppercase tracking-widest rounded flex items-center justify-center mb-3"><Icons.Phone className="mr-2 w-5 h-5" /> Enviar a RRIMPORT</button>
                          <button onClick={()=>setCart([])} className="w-full bg-transparent border border-gray-700 text-gray-400 py-3 text-xs font-bold uppercase rounded">Vaciar Carrito</button>
                       </div>
                     </div>
                   )}
                </div>
              </div>
            )}
          </main>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<CatalogApp />);
  </script>
</body>
</html>
